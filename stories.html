<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />
    <title>Stories - World Wide Kids</title>
    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicon-16x16.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="./assets/android-chrome-192x192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="./assets/android-chrome-512x512.png" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=PT Sans:wght@400;700&display=swap" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css" />
    <link rel="stylesheet" href="./styles/site.css" />
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <script>
      // Stop all audio when a play button is pressed or slider arrows are clicked
      document.addEventListener("DOMContentLoaded", function () {
        // Helper to pause all audio
        function pauseAllAudio() {
          document.querySelectorAll("audio").forEach(function (audio) {
            audio.pause();
            audio.currentTime = 0;
          });
        }

        // Pause all audio when slider arrows are clicked
        document.querySelectorAll(".slick-arrow").forEach(function (arrow) {
          arrow.addEventListener("click", function () {
            pauseAllAudio();
          });
        });

        // Also listen for dynamically added arrows (in case of slider re-init)
        const observer = new MutationObserver(function (mutations) {
          mutations.forEach(function (mutation) {
            mutation.addedNodes.forEach(function (node) {
              if (node.classList && node.classList.contains("slick-arrow")) {
                node.addEventListener("click", pauseAllAudio);
              }
            });
          });
        });
        observer.observe(document.body, { childList: true, subtree: true });
      });
      (function () {
        function setUpSlick() {
          var winWidth = $(window).width();
          console.log(winWidth);

          // --- FAVOURITE SLIDER ---
          var $favsSlider = $(".carousel-slider");
          var favsSliderOpts;
          favsSliderOpts = {
            centerMode: true,
            slidesToShow: 3,
            slidesToScroll: 3,
            infinite: true,
            variableWidth: true,
            adaptiveHeight: true,
            prevArrow: '<button type="button" class="left-arrow slick-prev slick-arrow"><span class="visually-hidden" aria-hidden="true">&#8592;</span></button>',
            nextArrow: '<button type="button" class="right-arrow slick-next slick-arrow"><span class="visually-hidden" aria-hidden="true">&#8594;</span></button>',
            responsive: [
              {
                breakpoint: 768,
                settings: {
                  arrows: false,
                  dots: true,
                  centerMode: true,
                  centerPadding: "60px",
                  slidesToShow: 3,
                },
              },
              {
                breakpoint: 480,
                settings: {
                  arrows: false,
                  dots: true,
                  centerMode: true,
                  centerPadding: "40px",
                  slidesToShow: 1,
                },
              },
            ],
            afterChange: function (event, slick, currentSlide) {
              $(".carousel-slider .slick-slide").removeAttr("id");

              // Add your unique ID to the center slide
              $(".carousel-slider .slick-center").attr("id", "-slide");
            },
          };
          // Add spinner overlay if not present
          if ($favsSlider.parent(".carousel-wrapper").find(".carousel-slider-spinner").length === 0) {
            $favsSlider
              .parent()
              .css("position", "relative")
              .append(
                '<div class="carousel-slider-spinner" style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:10;background:rgba(255,255,255,0.7)"><div class="spinner-border text-primary" role="status" aria-label="Loading slides"><span class="visually-hidden">Loading...</span></div></div>'
              );
          } else {
            $favsSlider.parent().find(".carousel-slider-spinner").show();
          }
          $favsSlider.css("opacity", 0);
          if ($favsSlider.hasClass("slick-initialized")) {
            $favsSlider.slick("unslick");
          }
          $favsSlider.slick(favsSliderOpts);
          setTimeout(function () {
            $favsSlider.stop(true, true).fadeTo(300, 1, function () {
              $favsSlider
                .parent()
                .find(".carousel-slider-spinner")
                .fadeOut(200, function () {
                  $(this).remove();
                });
            });
          }, 300);
        }

        $(document).ready(function () {
          setUpSlick();
          $(".carousel-slider").on("init", function (event, slick) {});
          $(".carousel-slider").on("afterChange", function (event, slick, currentSlide) {});
        });
        $(window).on("resize", function () {
          clearTimeout(window.wwkSlickResizedFinished);
          // Hide the slider immediately on resize to prevent flicker
          $(".carousel-slider").css("opacity", 0);
          window.wwkSlickResizedFinished = setTimeout(setUpSlick, 400);
        });
      })();
    </script>
  </head>
  <body class="stories-page">
    <header class="site-header" role="banner">
      <div class="container-fluid d-flex justify-content-between align-items-center">
        <a href="index.html">
          <img src="./assets/WWK logo.svg" alt="World Wide Kids Logo" class="wwk-logo-icon" />
        </a>
        <nav class="site-navbar navbar navbar-expand-md bg-body-tertiary p-0 rounded-5 d-sm-flex" aria-label="Main navigation">
          <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
              <span type="button" class="btn-close" aria-label="Close"></span>
            </button>
            <div class="collapse navbar-collapse p-0" id="navbarNav">
              <ul class="navbar-nav p-0 dot-separated">
                <li class="nav-item"><a class="nav-link" href="why.html">Why you’ll love us</a></li>
                <li class="nav-item"><a class="nav-link active" href="stories.html">Stories</a></li>
                <li class="nav-item"><a class="nav-link" href="listen.html">Ways to listen</a></li>
                <li class="nav-item"><a class="nav-link" href="grownups.html">For grown-ups</a></li>
                <li class="nav-item"><a class="nav-link" href="help.html">We’re here to help</a></li>
              </ul>
            </div>
          </div>
        </nav>
      </div>
    </header>
    <main class="page-content-wrapper container-fluid">
      <section class="catgories-section page-content-inner">
        <h1 id="stories-heading" class="mb-2 hero-heading-2" aria-labelledby="stories-heading">Original, timeless and magical</h1>
        <div class="hero-subheading">Stories from around the World told in both English and Spanish</div>
        <div class="stories-categories-panel">
          <div class="header">
            <div class="sub-header-teal">Adventure, imagination, and culture – all in one app!</div>
          </div>
          <div class="stories-panel-content">
            <div class="stories-categories-intro">Fun categories for kids to explore</div>
            <div class="stories-category-row">
              <div class="story-category">
                <img src="./assets/icon-animals.png" alt="Animals" />
                <div class="stories-category-label animals">Animals</div>
              </div>
              <div class="story-category">
                <img src="./assets/icon-fantasy.png" alt="Fantasy" />
                <div class="stories-category-label fantasy">Fantasy</div>
              </div>
              <div class="story-category">
                <img src="./assets/icon-adventure.png" alt="Adventure" />
                <div class="stories-category-label adventure">Adventure</div>
              </div>
              <div class="story-category">
                <img src="./assets/icon-ourworld.png" alt="Our World" />
                <div class="stories-category-label ourworld">Our World</div>
              </div>
              <div class="story-category">
                <img src="./assets/icon-silly.png" alt="Silly" />
                <div class="stories-category-label silly">Silly</div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="stories-section page-content-inner">
        <h2 class="hero-heading-2">A few of our favorites</h2>
        <div class="hero-subheading">Press play to listen to samples</div>
        <div class="stories-covers-row">
          <div class="carousel-wrapper">
            <div class="center carousel-slider">
              <div class="carousel-slide">
                <div class="slide-content">
                  <img src="/assets/fox.png" alt="Orange and white fox next to tabby cat with forest behind them" />
                  <div class="audio-holder">
                    <audio id="audioplayer1">
                      <source src="https://utility.librarycall.com/files/The-Fox-and-the-Cat-preview-audio.mp3" type="audio/mpeg" />
                      Your browser does not support the audio element.
                    </audio>
                    <button id="button1" class="btn audio-play-btn">
                      <div class="icon"><span class="visually-hidden" aria-hidden="true">Listen Online!</span></div>
                    </button>
                  </div>
                </div>
              </div>
              <div class="carousel-slide">
                <div class="slide-content">
                  <img src="/assets/mae_jemison.png" alt="Space shuttle blasting off against a black sky with a headshot of Dr. Mae Jemison, an African American woman in an orange spacesuit, in the lower right corner" />
                  <div class="audio-holder">
                    <audio id="audioplayer2">
                      <source src="https://utility.librarycall.com/files/ladoctoramaejemisonpreviewaudio.mp3" type="audio/mpeg" />
                      Your browser does not support the audio element.
                    </audio>
                    <button id="button2" class="btn audio-play-btn">
                      <div class="icon"><span class="visually-hidden" aria-hidden="true">Listen Online!</span></div>
                    </button>
                  </div>
                </div>
              </div>
              <div class="carousel-slide">
                <div class="slide-content">
                  <img src="/assets/peter.png" alt="Grey and white bunny looking forward with its ears pulled together" />
                  <div class="audio-holder">
                    <audio id="audioplayer3">
                      <source src="https://utility.librarycall.com/files/The-Tale-of-Peter-Rabbit-preview-audio.mp3" type="audio/mpeg" />
                      Your browser does not support the audio element.
                    </audio>
                    <button id="button3" class="btn audio-play-btn">
                      <div class="icon"><span class="visually-hidden" aria-hidden="true">Listen Online!</span></div>
                    </button>
                  </div>
                </div>
              </div>
              <div class="carousel-slide">
                <div class="slide-content">
                  <img src="/assets/elefante.png" alt="An elephant walks through the forest." />
                  <div class="audio-holder">
                    <audio id="audioplayer4">
                      <source src="https://utility.librarycall.com/files/elelefanteamableeditpreview.mp3" type="audio/mpeg" />
                      Your browser does not support the audio element.
                    </audio>
                    <button id="button4" class="btn audio-play-btn">
                      <div class="icon"><span class="visually-hidden" aria-hidden="true">Listen Online!</span></div>
                    </button>
                  </div>
                </div>
              </div>
              <div class="carousel-slide">
                <div class="slide-content">
                  <img src="/assets/calypso.png" alt="Two fruits are in the foreground. Above them, there are music notes on a staff." />
                  <div class="audio-holder">
                    <audio id="audioplayer5">
                      <source src="https://manage.librarycall.com/sites/default/files/previews/calypso%20in%20the%20kitchen%20preview.mp3" type="audio/mpeg" />
                      Your browser does not support the audio element.
                    </audio>
                    <button id="button5" class="btn audio-play-btn">
                      <div class="icon"><span class="visually-hidden" aria-hidden="true">Listen Online!</span></div>
                    </button>
                  </div>
                </div>
              </div>
              <div class="carousel-slide">
                <div class="slide-content">
                  <img src="/assets/winnie.png" alt="A boy and a group of stuffed animals all look at a wooden pole with a sign on it." />
                  <div class="audio-holder">
                    <audio id="audioplayer7">
                      <source src="https://utility.librarycall.com/files/winniethepoohylaaventuraalpolonorteclayeditpreview.mp3" type="audio/mpeg" />
                      Your browser does not support the audio element.
                    </audio>
                    <button id="button7" class="btn audio-play-btn">
                      <div class="icon"><span class="visually-hidden" aria-hidden="true">Listen Online!</span></div>
                    </button>
                  </div>
                </div>
              </div>
              <div class="carousel-slide">
                <div class="slide-content">
                  <img src="/assets/cheese.png" alt="A big slice of cheese in the starry night sky." />
                  <div class="audio-holder">
                    <audio id="audioplayer6">
                      <source src="https://manage.librarycall.com/sites/default/files/previews/updated%20the%20boy%20who%20wanted%20more%20cheese%20preview.mp3" type="audio/mpeg" />
                      Your browser does not support the audio element.
                    </audio>
                    <button id="button6" class="btn audio-play-btn">
                      <div class="icon"><span class="visually-hidden" aria-hidden="true">Listen Online!</span></div>
                    </button>
                  </div>
                </div>
              </div>
              <div class="carousel-slide">
                <div class="slide-content">
                  <img src="/assets/raton.png" alt="A friendly looking cartoon mouse holds a large tooth." />
                  <div class="audio-holder">
                    <audio id="audioplayer11">
                      <source src="https://utility.librarycall.com/files/elratonperezeditpreview.mp3" type="audio/mpeg" />
                      Your browser does not support the audio element.
                    </audio>
                    <button id="button11" class="btn audio-play-btn">
                      <div class="icon"><span class="visually-hidden" aria-hidden="true">Listen Online!</span></div>
                    </button>
                  </div>
                </div>
              </div>
              <div class="carousel-slide">
                <div class="slide-content">
                  <img src="/assets/monkey.png" alt="A dark orange crab is holding an omusubi rice snack above its head. A white Japanese macaque looks on. " />
                  <div class="audio-holder">
                    <audio id="audioplayer9">
                      <source src="https://manage.librarycall.com/sites/default/files/previews/monkey%20and%20the%20crab%20preview.mp3" type="audio/mpeg" />
                      Your browser does not support the audio element.
                    </audio>
                    <button id="button9" class="btn audio-play-btn">
                      <div class="icon"><span class="visually-hidden" aria-hidden="true">Listen Online!</span></div>
                    </button>
                  </div>
                </div>
              </div>
              <div class="carousel-slide">
                <div class="slide-content">
                  <img src="/assets/pollo.png" alt="a painting of a chicken over a dark background." />
                  <div class="audio-holder">
                    <audio id="audioplayer10">
                      <source src="https://utility.librarycall.com/files/elcuentodelpollopreview.mp3" type="audio/mpeg" />
                      Your browser does not support the audio element.
                    </audio>
                    <button id="button10" class="btn audio-play-btn">
                      <div class="icon"><span class="visually-hidden" aria-hidden="true">Listen Online!</span></div>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="good-stories-image">
          <img src="./assets/good-stories.png" alt="Image of child with headphones listening to audio stores and  with the words Every child deserves good stories overlaid" class="img-fluid" />
        </div>
        <div class="blue-bar mt-4" aria-hidden="true"></div>
        <div class="cta-section ready-discover-cta">
          <div class="cta-lead">Ready to discover a Whole World of Kids stories?</div>
          <a href="./listen.html" class="btn btn-lg cta-btn">Get the free app</a>
          <div class="cta-lead">Your stories are waiting!</div>
        </div>
      </section>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="./scripts/slider.js"></script>
  </body>
</html>
